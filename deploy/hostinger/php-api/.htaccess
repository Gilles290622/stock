RewriteEngine On

# Ce .htaccess est placé dans public_html/stock/api
# On route TOUT vers index.php en passant la route demandée en query param.
# Cela rend le routage robuste même si REQUEST_URI est modifiée par l'hébergeur.

# Transmettre l'en-tête Authorization à PHP (nécessaire pour JWT sous LiteSpeed/Apache)
SetEnvIfNoCase Authorization "^(.*)$" HTTP_AUTHORIZATION=$1
RewriteCond %{HTTP:Authorization} .
RewriteRule ^ - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?route=$1 [QSA,L]
